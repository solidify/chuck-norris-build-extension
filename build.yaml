resources:
- repo: self
  clean: true
queue:
  name: Hosted VS2017
  demands: npm

steps:
- task: Npm@0
  displayName: 'npm install'
  inputs:
    arguments: '--force'

- task: Npm@1
  displayName: 'npm build'
  inputs:
    command: custom
    verbose: false
    customCommand: 'run build'

- task: ms-devlabs.vsts-developer-tools-build-tasks.package-extension-build-task.PackageVSTSExtension@1
  displayName: 'Package Extension'
  inputs:
    outputPath: 'chuck-norris-$(Build.BuildNumber).vsix'
    extensionVersion: '$(Build.BuildNumber)'

- task: CopyPublishBuildArtifacts@1
  displayName: 'Copy Publish Artifact: drop'
  inputs:
    Contents: 'chuck-norris-$(Build.BuildNumber).vsix'
    ArtifactName: drop
    ArtifactType: Container
